<div class="content">
  <div fxLayout="row wrap" fxLayoutGap="16px grid">
    <div fxFlex="25%" style="text-align: left">
      <p *ngIf="crudOperation === 'ViewAll'">Patient Master</p>
      <p *ngIf="crudOperation === 'Create'">Add Patient</p>
    </div>
    <div fxFlex="75%" style="text-align: right">
      <button
        mat-raised-button
        *ngIf="crudOperation === 'ViewAll'"
        (click)="crudOperationChange('Create')"
      >
        Add Patient
      </button>
      <button
        mat-raised-button
        *ngIf="crudOperation === 'Create'"
        (click)="crudOperationChange('SetCrudOperation', 'ViewAll')"
      >
        View Patient
      </button>
    </div>
  </div>
</div>

<div class="content" *ngIf="crudOperation === 'ViewAll'">
  <div fxLayout="row wrap" fxLayoutGap="16px grid">
    <div
      fxFlex="25%"
      fxFlex.xs="100%"
      fxFlex.sm="33%"
      *ngFor="let num of [1, 2, 3, 4, 5, 6, 7]"
    >
      <mat-card class="mat-elevation-z4">
        <mat-card-header>
          <!-- <img
            src="/assets/img/ewac_maintenance_and_repair_services_img.jpg"
            mat-card-avatar
          /> -->
          <!-- <mat-icon mat-card-avatar>home</mat-icon> -->
          <svg
            mat-card-avatar
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            xml:space="preserve"
            style="
              shape-rendering: geometricPrecision;
              text-rendering: geometricPrecision;
              image-rendering: optimizeQuality;
              fill-rule: evenodd;
              clip-rule: evenodd;
            "
            viewBox="0 0 42 42"
          >
            <g id="UrTavla">
              <circle
                style="
                  fill: url(#toning);
                  stroke: #010101;
                  stroke-width: 2;
                  stroke-miterlimit: 10;
                "
                cx="20"
                cy="20"
                r="20"
              ></circle>

              <text
                x="50%"
                y="50%"
                stroke="#000"
                text-anchor="middle"
                stroke-width="1"
                dx="1"
                dy="6"
                font-size="15"
              >
                {{ "A" + num }}
              </text>
            </g>
          </svg>
          <mat-card-title>Himalayan Peaks {{ num }}</mat-card-title>
          <mat-card-subtitle>Himalayan Peaks {{ num }}</mat-card-subtitle>
        </mat-card-header>
        <!-- <img
          mat-card-image
          src="/assets/img/ewac_maintenance_and_repair_services_img.jpg"
        /> -->
        <mat-card-content>
          <div
            style="background-color: #87ceeb; padding: 30px 10px; color: black"
          >
            <h2 style="text-align: center">Apr 2021 - Mar 2022</h2>
            <p style="text-align: center">Verified</p>
          </div>

          <p>The Himalayas is a mountain range in Asia.</p>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button>LIKE</button>
          <button mat-button>SHARE</button>
          <div fxFlex></div>
          <button mat-icon-button style="color: #87ceeb; font-size: 20px">
            <mat-icon
              aria-hidden="false"
              aria-label="Example home icon"
              fontSet="material-icons-outlined"
              >account_circle</mat-icon
            >
          </button>
          <button mat-icon-button style="color: #87ceeb; font-size: 20px">
            <span class="material-icons-outlined"> settings </span>
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>

<div class="content" *ngIf="crudOperation === 'Create'" fxLayout="column">
  <ng-container *ngTemplateOutlet="pfTmpl"></ng-container>
</div>

<ng-template #pfTmpl>
  <div
    fxFlex
    fxLayout="column"
    fxLayoutWrap
    fxLayoutGap="1em"
    fxLayoutAlign="start start"
    style="margin: 30px; margin-bottom: 10px"
  >
    <form
      [formGroup]="patientForm"
      (ngSubmit)="submit(patientForm)"
      #form="ngForm"
      fxFlex
      fxLayout="column"
      fxLayoutAlign="space-around start"
      fxFlexAlign="start"
      fxLayoutGap="5em"
    >
      <section fxLayout="column" fxLayoutWrap fxLayoutGap="1em">
        <div
          class="row"
          fxLayout
          fxLayoutGap="2em"
          fxLayout.xs="column wrap"
          fxLayoutGap.xs=".5em"
        >
          <mat-form-field fxFlex>
            <mat-label>Patient Name</mat-label>
            <input
              matInput
              placeholder="Name of the patient"
              title="Patient Name"
              formControlName="name"
            />
            <mat-error *ngIf="patientForm.get('name')?.hasError('required')">
              Patient Name is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
          <mat-form-field fxFlex>
            <mat-label>Date of Birth</mat-label>
            <input
              matInput
              placeholder="Date of Birth (MM/DD/YYYY)"
              [matDatepicker]="dobPicker"
              formControlName="dateOfBirth"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="dobPicker"
            ></mat-datepicker-toggle>
            <mat-datepicker #dobPicker></mat-datepicker>
            <mat-error
              *ngIf="patientForm.get('dateOfBirth')?.hasError('required')"
            >
              Date of Birth is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
        </div>
        <div
          class="row"
          fxLayout
          fxLayoutGap="2em"
          fxLayout.xs="column wrap"
          fxLayoutGap.xs=".5em"
        >
          <mat-form-field fxFlex>
            <mat-label>Gender</mat-label>
            <mat-select formControlName="gender">
              <mat-option
                *ngFor="let genderValue of genderList"
                [value]="genderValue"
              >
                {{ genderValue }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="patientForm.get('gender')?.hasError('required')">
              Gender is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
          <mat-form-field fxFlex>
            <mat-label>Marital Status</mat-label>
            <mat-select formControlName="maritalStatus">
              <mat-option
                *ngFor="let maritalStatusValue of maritalStatusList"
                [value]="maritalStatusValue"
              >
                {{ maritalStatusValue }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="patientForm.get('maritalStatus')?.hasError('required')"
            >
              Marital Status is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
          <mat-form-field fxFlex>
            <mat-label>Religion</mat-label>
            <mat-select formControlName="religion">
              <mat-option
                *ngFor="let religionValue of religionList"
                [value]="religionValue"
              >
                {{ religionValue }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="patientForm.get('religion')?.hasError('required')"
            >
              Religion is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
        </div>
        <div
          class="row"
          fxLayout
          fxLayoutGap="2em"
          fxLayout.xs="column wrap"
          fxLayoutGap.xs=".5em"
        >
          <mat-form-field fxFlex>
            <mat-label>Adhar Number</mat-label>
            <input
              matInput
              placeholder="Adhar Card Number (For Indian Patients)"
              formControlName="adharNo"
            />
            <mat-error *ngIf="patientForm.get('adharNo')?.hasError('required')">
              Adhar Number is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
          <div fxFlex>
            <mat-label>Medial Insured?</mat-label>
            <br />
            <mat-radio-group
              aria-label="Select an option"
              formControlName="medicalInsured"
            >
              <mat-radio-button [value]="true"> Yes</mat-radio-button>
              <mat-radio-button [value]="false">No</mat-radio-button>
            </mat-radio-group>
          </div>
          <form
            formGroupName="medicalInsurance"
            fxFlex
            *ngIf="patientForm.get('medicalInsured')?.value"
          >
            <mat-form-field fxFlex>
              <mat-label>Insurance Company Name</mat-label>
              <input
                matInput
                placeholder="Insurance Company Name"
                formControlName="company"
              />
              <mat-error
                *ngIf="
                  patientForm
                    .get('medicalInsurance')
                    ?.get('company')
                    ?.hasError('required')
                "
              >
                Insurance Company name is
                <span class="err-highlight">required</span>.
              </mat-error>
            </mat-form-field>

            <mat-form-field fxFlex>
              <mat-label>Insurance Number</mat-label>
              <input
                matInput
                placeholder="Insurance Number"
                formControlName="number"
              />
              <mat-error
                *ngIf="
                  patientForm
                    .get('medicalInsurance')
                    ?.get('number')
                    ?.hasError('required')
                "
              >
                Insurance Number is <span class="err-highlight">required</span>.
              </mat-error>
            </mat-form-field>
          </form>
        </div>
        <div
          class="row"
          fxLayout
          fxLayoutGap="2em"
          fxLayout.xs="column wrap"
          fxLayoutGap.xs=".5em"
        >
          <mat-form-field fxFlex>
            <mat-label>Father's Name</mat-label>
            <input
              matInput
              placeholder="Father's Name"
              formControlName="fatherName"
            />
            <mat-error
              *ngIf="patientForm.get('fatherName')?.hasError('required')"
            >
              Father's Name is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
          <mat-form-field fxFlex>
            <mat-label>Mother's Name</mat-label>
            <input
              matInput
              placeholder="Mother's Name"
              formControlName="motherName"
            />
            <mat-error
              *ngIf="patientForm.get('motherName')?.hasError('required')"
            >
              Mother's Name is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
          <mat-form-field fxFlex>
            <mat-label>Spouce's Name</mat-label>
            <input
              matInput
              placeholder="Spouce's Name"
              formControlName="spouceName"
            />
            <mat-error
              *ngIf="patientForm.get('spouceName')?.hasError('required')"
            >
              Spouce's Name is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
        </div>
        <div
          class="row"
          fxLayout
          fxLayoutGap="2em"
          fxLayout.xs="column wrap"
          fxLayoutGap.xs=".5em"
        >
          <mat-form-field fxFlex>
            <mat-label>Phone Number</mat-label>
            <input
              matInput
              placeholder="Phone Number"
              formControlName="phone"
            />
            <mat-error *ngIf="patientForm.get('phone')?.hasError('required')">
              Phone Number is <span class="err-highlight">required</span>.
            </mat-error>
            <mat-error *ngIf="patientForm.get('phone')?.hasError('pattern')">
              Phone Number is <span class="err-highlight">invalid</span>.
            </mat-error>
          </mat-form-field>
          <mat-form-field fxFlex>
            <mat-label>Email Id</mat-label>
            <input matInput placeholder="Email Id" formControlName="email" />
            <mat-error *ngIf="patientForm.get('email')?.hasError('required')">
              Email Id is <span class="err-highlight">required</span>.
            </mat-error>
            <mat-error *ngIf="patientForm.get('email')?.hasError('pattern')">
              Email Id is <span class="err-highlight">invalid</span>.
            </mat-error>
          </mat-form-field>
        </div>
        <form
          formGroupName="addressObj"
          class="row"
          fxLayout="row wrap"
          fxLayoutGap="2em"
          fxLayout.xs="column wrap"
          fxLayoutGap.xs=".5em"
        >
          <mat-form-field fxFlex>
            <mat-label>Address</mat-label>
            <input
              matInput
              placeholder="Address (House No, Street etc.)"
              formControlName="address"
            />
            <mat-error
              *ngIf="
                patientForm
                  .get('addressObj')
                  ?.get('address')
                  ?.hasError('required')
              "
            >
              Address is
              <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>

          <mat-form-field fxFlex>
            <mat-label>City</mat-label>
            <input matInput placeholder="City" formControlName="city" />
            <mat-error
              *ngIf="
                patientForm.get('addressObj')?.get('city')?.hasError('required')
              "
            >
              City is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
          <mat-form-field fxFlex>
            <mat-label>State</mat-label>
            <input matInput placeholder="State" formControlName="state" />
            <mat-error
              *ngIf="
                patientForm
                  .get('addressObj')
                  ?.get('state')
                  ?.hasError('required')
              "
            >
              State is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>

          <mat-form-field fxFlex>
            <mat-label>Pin/Zip Code</mat-label>
            <input matInput placeholder="Pin/Zip Code" formControlName="pin" />
            <mat-error
              *ngIf="
                patientForm.get('addressObj')?.get('pin')?.hasError('required')
              "
            >
              Pin/Zip Code is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
          <mat-form-field fxFlex>
            <mat-label>Country</mat-label>
            <mat-select formControlName="country">
              <mat-option
                *ngFor="let countryValue of countryList"
                [value]="countryValue"
              >
                {{ countryValue }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="
                patientForm
                  .get('addressObj')
                  ?.get('country')
                  ?.hasError('required')
              "
            >
              Country is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
          <mat-form-field fxFlex>
            <mat-label>Address Type</mat-label>
            <mat-select formControlName="addressType">
              <mat-option
                *ngFor="let addressTypeValue of addressTypeList"
                [value]="addressTypeValue"
              >
                {{ addressTypeValue }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="
                patientForm
                  .get('addressObj')
                  ?.get('addressType')
                  ?.hasError('required')
              "
            >
              Address Type is <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
        </form>
        <form
          formGroupName="emergencyContact"
          class="row"
          fxLayout="row wrap"
          fxLayoutGap="2em"
          fxLayout.xs="column wrap"
          fxLayoutGap.xs=".5em"
        >
          <mat-form-field fxFlex>
            <mat-label> fullName</mat-label>
            <input
              matInput
              placeholder="Full Name"
              formControlName="fullName"
            />
            <mat-error
              *ngIf="
                patientForm
                  .get('emergencyContact')
                  ?.get('fullName')
                  ?.hasError('required')
              "
            >
              Full Name is
              <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>

          <mat-form-field fxFlex>
            <mat-label>Relationship With Patient</mat-label>
            <input
              matInput
              placeholder="Relationship With Patient"
              formControlName="relationship"
            />
            <mat-hint
              >e.g. Son/Father/Mother/Brother etc. (of Patient)</mat-hint
            >
            <mat-error
              *ngIf="
                patientForm
                  .get('emergencyContact')
                  ?.get('relationship')
                  ?.hasError('required')
              "
            >
              Relationship With Patient is
              <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
          <mat-form-field fxFlex>
            <mat-label>Phone Number</mat-label>
            <input
              matInput
              placeholder="Phone Number"
              formControlName="phone"
            />
            <mat-error
              *ngIf="
                patientForm
                  .get('emergencyContact')
                  ?.get('phone')
                  ?.hasError('required')
              "
            >
              Phone Number With Patient is
              <span class="err-highlight">required</span>.
            </mat-error>
          </mat-form-field>
        </form>
      </section>
      <div fxFlexAlign="end">
        <button mat-raised-button color="primary" type="submit">
          Save Patient
        </button>
        <button mat-button color="warn" type="button" (click)="closeDialog()">
          Cancel
        </button>
      </div>
    </form>
    <div *ngIf="progress > 0">
      <mat-progress-bar
        mode="determinate"
        value="{{ progress }}"
      ></mat-progress-bar>
    </div>
  </div>
</ng-template>
